---
layout: post
title: "Russify Comments Number"
---
Когда-то давно я&nbsp;читал какую-то статью про развитие цивилизаций. Там была любопытная деталь, касающаяся счета. Автор статьи утверждал, что первобытный человек считал так: один, два, и&nbsp;так до&nbsp;какого-то предела счетного множества, много. То&nbsp;есть, он&nbsp;мог считать до&nbsp;какого-то ограниченного предела, а&nbsp;все, что больше этого счетного множества не&nbsp;помещалось в&nbsp;его мозги и&nbsp;называлось попросту &laquo;много&raquo;. И&nbsp;он&nbsp;приводил аргументы за&nbsp;то,&nbsp;что в&nbsp;русском языке (как и&nbsp;в&nbsp;некоторых других) до&nbsp;сих пор есть следы этого деления, к&nbsp;примеру:

* одна лошадь &#151; это один.
* две лошади, три лошади, четыре лошади (следите за изменением окончания) &#151; это счетное множество.
* пять лошадей, шесть лошадей и&nbsp;будь их&nbsp;хоть миллион, но&nbsp;все равно окончание будет <em>-ей</em>. Это то&nbsp;самое &laquo;много&raquo;.

То&nbsp;есть, счетное множество у&nbsp;древних славян заканчивалось в&nbsp;районе четырех.

Собственно, это была лирика. А&nbsp;практика вот такая:

При настройке wordpress&#146;овского блога я&nbsp;столкнулся со&nbsp;следующей проблемой: под русский язык невозможно настроить нормальное склонение (так как я&nbsp;не&nbsp;гуманитарий, то&nbsp;за&nbsp;точность применения термина не&nbsp;ручаюсь :) существительного &laquo;комментарий&raquo;. То&nbsp;есть, к&nbsp;посту написали 1&nbsp;комментарий, 2&nbsp;комментария, или 5&nbsp;комментариев.

В&nbsp;английском языке с&nbsp;этим делом проще. 0&nbsp;comments, 1&nbsp;comment, 2&nbsp;and more comments. Примерно так и&nbsp;работает стандартная функция comments_number в&nbsp;файле wp-includes/comment-tempate.php. Она принимает всего четыре аргумента &#151; формулу для вывода нуля комментариев, одного комментария, &nbsp;&laquo;многих&raquo; комментариев, а&nbsp;также флаг deprecated.

Но&nbsp;я&nbsp;пишу на&nbsp;русском языке, и,&nbsp;соответственно, имею другую ситуацию. Итак. Чтобы нормально склонять слово &laquo;комментарии&raquo; нам надо обработать следующие ситуации:

* Ноль комментариев.
* Один комментарий (а&nbsp;также 21,&nbsp;31&nbsp;etc.)
* Два, три, четыре комментария (а&nbsp;также 22-24, 32-34&nbsp;etc.)
* Пятнадцать комментариев. То&nbsp;есть произвольное число, не&nbsp;подпадающее под вышеуказанные рамки.

Для решения я&nbsp;написал этот простенький <a href="http://ulizko.com/download/wordpress-plugins/russify_comments_number.php.zip">плагин</a>.

Плагин устанавливается крайне просто &#151; разархивируйте, скопируете в&nbsp;папку wp-content/plugins, в&nbsp;админке его активируйте. Проверялся на версиях 2.3.3 и 2.5.1.
Настроек у&nbsp;него никаких нет, так что он&nbsp;тупо выводит &laquo;23&nbsp;комментария&raquo;, &laquo;31&nbsp;комментарий&raquo; и&nbsp;так далее.

Собственно, пока что я&nbsp;не&nbsp;вижу никаких причин его дорабатывать, так как меня полностью устраивает его функционал. В&nbsp;принципе, можно еще добавить конвертер цифр в&nbsp;слова, чтобы было полностью словесное описание количества комментариев, но&nbsp;я&nbsp;думаю, это не&nbsp;самый лучший вариант &#151; гораздо удобнее одним взглядом на&nbsp;цифру понять число, нежели читать целую строчку, чтобы узнать, что к&nbsp;посту настрочили четыреста восемьдесят девять комментариев.